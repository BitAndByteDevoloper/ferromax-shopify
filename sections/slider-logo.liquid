{% comment %}
  Archivo: sections/slider-logo.liquid
  Sección carrusel/marquesina de logos con opciones de encabezado, fuente, tamaño, color, velocidad y tamaño de logo.
{% endcomment %}

{{ 'section-slider-logo.css' | asset_url | stylesheet_tag }}

<section class="slider-logo"
  style="--marquee-duration: {{ section.settings.speed_seconds }}s;
         --logo-width: {{ section.settings.logo_width }}px;
         --logo-gap: {{ section.settings.logo_gap }}px;
         --header-radius: {{ section.settings.header_radius }}px;
         --header-font-size: {{ section.settings.header_font_size }}px;
         --header-text-color: {{ section.settings.header_text_color }};">

  {% if section.settings.show_header %}
    <div class="sl-header"
         style="
           {% if section.settings.header_bg_style == 'gradient' %}
             --header-bg: linear-gradient(90deg, {{ section.settings.header_grad_start }}, {{ section.settings.header_grad_end }});
           {% else %}
             --header-bg: {{ section.settings.header_solid_color }};
           {% endif %}
           font-family: {{ section.settings.header_font_family | default: 'system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif' }};">
      <div class="sl-header__inner">
        {{ section.settings.header_text | escape }}
      </div>
    </div>
  {% endif %}

  <div class="sl-track-wrap" {% if section.settings.pause_on_hover %}data-pause-on-hover="true"{% endif %}>
    <div class="sl-track">
      {%- for block in section.blocks -%}
        {%- render 'slider-logo-item', block: block, settings: section.settings -%}
      {%- endfor -%}
      {%- comment -%} Duplicado para scroll infinito {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- render 'slider-logo-item', block: block, settings: section.settings -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Carrusel de Logos",
  "tag": "section",
  "class": "slider-logo-section",
  "max_blocks": 30,
  "settings": [
    { "type": "checkbox", "id": "show_header", "label": "Mostrar encabezado", "default": true },
    { "type": "text", "id": "header_text", "label": "Texto del encabezado", "default": "Las mejores marcas" },
    { "type": "select", "id": "header_bg_style", "label": "Fondo del encabezado", "default": "gradient", "options": [
      {"value": "gradient", "label": "Degradado"},
      {"value": "solid", "label": "Color sólido"}
    ] },
    { "type": "color", "id": "header_grad_start", "label": "Degradado: color inicial", "default": "#2056a0" },
    { "type": "color", "id": "header_grad_end", "label": "Degradado: color final", "default": "#3dc1b2" },
    { "type": "color", "id": "header_solid_color", "label": "Sólido: color del fondo", "default": "#2056a0" },
    { "type": "color", "id": "header_text_color", "label": "Color del texto", "default": "#ffffff" },
    { "type": "text", "id": "header_font_family", "label": "Familia tipográfica del encabezado (stack CSS)", "default": "'Cabin', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif" },
    { "type": "range", "id": "header_font_size", "label": "Tamaño de fuente del encabezado (px)", "min": 14, "max": 48, "step": 1, "default": 24 },
    { "type": "range", "id": "header_radius", "label": "Radio de borde del encabezado (px)", "min": 0, "max": 24, "step": 1, "default": 8 },

    { "type": "range", "id": "logo_width", "label": "Ancho de cada logo (px)", "min": 60, "max": 260, "step": 4, "default": 180 },
    { "type": "range", "id": "logo_gap", "label": "Espacio entre logos (px)", "min": 0, "max": 48, "step": 2, "default": 20 },
    { "type": "range", "id": "speed_seconds", "label": "Velocidad (segundos por vuelta)", "min": 8, "max": 120, "step": 2, "default": 42 },
    { "type": "checkbox", "id": "pause_on_hover", "label": "Pausar al pasar el cursor", "default": true }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Imagen del logo" },
        { "type": "url", "id": "link", "label": "Enlace opcional" },
        { "type": "text", "id": "alt", "label": "Texto alternativo (alt)" }
      ]
    }
  ],
  "presets": [
    { "name": "Carrusel de Logos (Slider Logo)", "blocks": [ {"type": "logo"}, {"type": "logo"}, {"type": "logo"}, {"type": "logo"} ] }
  ]
}
{% endschema %}
